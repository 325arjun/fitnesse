---
Help: Combination of front and backend test to validate input supplied is stored
---
In this test we will fill in a form and afterwards check that our responses have been properly recorded.
To ensure we check the right results we will use a random name, which we will later use to filter the response from this test run from all responses received.

We define a random name, and comment, which will be used in front and backend part of the test.

|script     |string fixture                                                                     |
|$myName=   |value of|!randomString (10) (abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ)|
|$myComment=|value of|More !randomString (20) (abcdefghijklmnopqrstuvwxyz ä∆©>z@¶≤-)            |


|storyboard      |browser test                                          |
|open            |https://fhoeben.typeform.com/to/${FORM_UID}           |
|click           |Start                                                 |
|type            |$myName                                               |
|press           |enter                                                 |
|type            |example.com                                           |
|click           |OK                                                    |
|type            |A                                                     |
|wait for visible|How often do you write automated tests?               |
|type            |9                                                     |
|wait for visible|could you share your email address with us?           |
|type            |test@example.com                                      |
|press           |enter                                                 |
|type            |4                                                     |
|wait for visible|Will you be staying for the afterparty?               |
|type            |A                                                     |
|wait for visible|Do you have any comments or suggestions for the event?|
|type            |$myComment                                            |
|press           |enter                                                 |
|click           |Register!                                             |
|wait for visible|Thanks for completing this typeform                   |
|click           |Create a typeform                                     |

!*> scenario's used to make json test readable

|scenario |retrieve responses for  |form           |
|set value|${API_KEY}              |for |key       |
|set value|true                    |for |completed |
|set value|50                      |for |limit     |
|get from |https://api.typeform.com/v1/form/@{form}|
|check    |response status         |200            |
|show     |response                                |

|scenario|store id for question _ in _|question, var                                            |
|$@{var}=|element                     |0|of json path|questions[?(@.question=="@{question}")].id|

|scenario             |user _ suggested _                                    |name, suggestion                                                                                |
|store id for question|What's your name?                                     |in|name_id                                                                                      |
|store id for question|Do you have any comments or suggestions for the event?|in|suggestion_id                                                                                |
|check                |element                                               |0 |of json path|responses[?(@.answers.$name_id=="@{name}")].answers.$suggestion_id|@{suggestion}|

*!

|script                |json http test                                 |
|retrieve responses for|${FORM_UID}                                    |
|show                  |json path|stats.responses.total                |
|check                 |json path|stats.responses.completed|> 0        |
|check                 |json path|stats.responses.showing  |0 < _ <= 50|
|user                  |$myName  |suggested                |$myComment |

